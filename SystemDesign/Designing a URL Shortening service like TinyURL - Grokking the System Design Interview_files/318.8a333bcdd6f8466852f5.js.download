(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[318],{"4j76":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("1OyB"),s=n("vuIU"),o=n("JX7q"),i=n("Ji7U"),c=n("md7G"),r=n("foSv"),l=n("rePB"),d=n("q1tI"),u=n.n(d),p=n("cQVX"),v=u.a.createElement;function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(r.a)(e);if(t){var s=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var f=function(e){Object(i.a)(n,e);var t=h(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(l.a)(Object(o.a)(e),"state",{showChildren:!1}),Object(l.a)(Object(o.a)(e),"modalRef",u.a.createRef()),Object(l.a)(Object(o.a)(e),"onShown",(function(){e.setState({showChildren:!0})})),e}return Object(s.a)(n,[{key:"render",value:function(){var e,t=this.props.children.props;return v(p.a,{lg:!0,ref:this.modalRef,className:"dumb-modal",onShown:this.onShown,fullscreen:!!(null===t||void 0===t||null===(e=t.config)||void 0===e?void 0:e.displayFullScreen),style:this.props.style},v(p.b,null,this.state.showChildren?this.props.children:null))}}]),n}(u.a.Component)},pLAI:function(e,t,n){"use strict";n.r(t);var a=n("wx14"),s=n("1OyB"),o=n("JX7q"),i=n("vuIU"),c=n("Ji7U"),r=n("md7G"),l=n("foSv"),d=n("rePB"),u=n("KQm4"),p=n("q1tI"),v=n.n(p),h=n("Dsxo"),f=n("n90j"),b=n("98aK");function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var C=p.createElement("path",{d:"M9.1 0v18.2M0 9.1h18.2"});var g=function(e){return p.createElement("svg",m({className:"thin-plus-icon",viewBox:"0 0 18.2 18.2"},e),C)},O=n("1kCS"),j=n("SaoS"),y=n("SP4F"),x=n("4j76"),w=n("FF6X"),k=n("+zGO"),S=n("vOnD"),I=n("CwS1"),R=n("EAKA"),_=n("17x9"),A=n.n(_);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var D=Object(p.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,s=e.size,o=void 0===s?24:s,i=P(e,["color","size"]);return v.a.createElement("svg",N({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),v.a.createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),v.a.createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))}));D.propTypes={color:A.a.string,size:A.a.oneOfType([A.a.string,A.a.number])},D.displayName="Pause";var F=D,q=n("au/U"),z=n("5QIj"),E=n("Rzx/"),H=n("NIzo"),B=n("JOgI"),M=n("xI/X"),V=n("HjCv"),L=n("Vixx"),T=v.a.createElement,W=(S.d.div.withConfig({displayName:"styles__CanvasAnimationStyled",componentId:"sc-8tvqhb-0"})([""]),Object(S.d)(L.a).withConfig({displayName:"styles__SlidePreviewButton",componentId:"sc-8tvqhb-1"})([":active,:focus{outline:none;background:",";}.b-some-with-icon,.b-some-with-icon-icon,svg{:focus,:active{outline:none;}}"],"#FFFFFF")),U=S.d.div.withConfig({displayName:"styles__ThumbnailStrip",componentId:"sc-8tvqhb-2"})(["display:flex;padding:10px 5px 5px 5px;overflow:auto;position:static;text-align:left;white-space:nowrap;width:100%;background-color:",";margin-bottom:5px;border-radius:",";"],"#F5F5F5",h.D),J=S.d.a.withConfig({displayName:"styles__PlusButton",componentId:"sc-8tvqhb-3"})(["display:inline-block;cursor:pointer;cursor:hand;margin-left:15px;margin-right:15px;top:45px;position:relative;width:36px;height:36px;.clone-icon{width:32px;height:32px;fill:"," !important;}&:hover{border:none;padding-bottom:0px;}svg{width:24px;height:24px;stroke:",";}"],"#8F8F99","#000000"),X=S.d.div.withConfig({displayName:"styles__AnimationContainer",componentId:"sc-8tvqhb-4"})(["display:block;min-height:768px;.canvasContainer{display:block;}.fullscreenBtnWrapper{position:absolute;right:10px;top:13px;}.btnFullscreen{border:none;background:transparent;&:active,&:hover,&:focus{outline:none;background:transparent;box-shadow:none;}}&.fullscreen{position:fixed;top:0;bottom:0;left:0;right:0;z-index:500;background:",";padding-top:131px;.btnFullscreen{font-size:20px;}.canvasAnimationThumbnailStrip{position:absolute;top:0;}.canvasContainer{height:100%;overflow:auto;}}"],"#FFFFFF"),G=Object(S.c)(["margin-right:18px;box-shadow:0px 0px 9px ",";:hover,:focus{box-shadow:0px 0px 12px ",";}"],"rgba(0, 0, 0, 0.2)","rgba(0, 0, 0, 0.2)"),K=S.d.div.withConfig({displayName:"styles__CanvasAnimationViewer",componentId:"sc-8tvqhb-5"})(["border:1px solid ",";border-radius:",";margin-bottom:10px;"],"#D2D2D6",h.l),Q=S.d.div.withConfig({displayName:"styles__ButtonsWrap",componentId:"sc-8tvqhb-6"})(["display:flex;align-items:center;justify-content:center;margin-top:15px;"]),Y=S.d.div.withConfig({displayName:"styles__Number",componentId:"sc-8tvqhb-7"})(["text-align:right;margin-right:15px;margin-bottom:10px;"]),Z=Object(S.d)(V.a).attrs((function(){return{children:T(I.a,{size:22,"aria-label":"previous slide"})}})).withConfig({displayName:"styles__Left",componentId:"sc-8tvqhb-8"})(["",";"],G),$=Object(S.d)(V.a).attrs((function(){return{children:T(R.a,{size:22,"aria-label":"next slide"})}})).withConfig({displayName:"styles__Right",componentId:"sc-8tvqhb-9"})(["",";"],G),ee=Object(S.d)(V.a).attrs((function(){return{children:T(F,{size:22,"aria-label":"pause slide show"})}})).withConfig({displayName:"styles__AnimationPause",componentId:"sc-8tvqhb-10"})(["",";"],G),te=Object(S.d)(V.a).attrs((function(){return{children:T(q.a,{size:20,"aria-label":"start slide show"})}})).withConfig({displayName:"styles__AnimationPlay",componentId:"sc-8tvqhb-11"})(["",";padding:10px 9px 10px 12px;"],G),ne=Object(S.d)(V.a).attrs((function(){return{children:T(z.a,{size:22,"aria-label":"got to first slide"})}})).withConfig({displayName:"styles__Repeat",componentId:"sc-8tvqhb-12"})(["",";"],G),ae=Object(S.d)(V.a).attrs((function(){return{children:T(E.a,{size:22,"aria-label":"view all slides"})}})).withConfig({displayName:"styles__AnimationPlus",componentId:"sc-8tvqhb-13"})(["",";"],G),se=Object(S.d)(V.a).attrs((function(){return{children:T(H.a,{size:20,"aria-label":"maximize"})}})).withConfig({displayName:"styles__AnimationMaximize",componentId:"sc-8tvqhb-14"})(["",";margin-right:0px;padding:10px;"],G),oe=Object(S.d)(V.a).attrs((function(){return{children:T(B.a,{size:20,"aria-label":"minimize"})}})).withConfig({displayName:"styles__AnimationMinimize",componentId:"sc-8tvqhb-15"})(["",";margin-right:0px;padding:10px;"],G),ie=Object(S.d)(V.a).attrs((function(){return{children:T(M.a,{size:22})}})).withConfig({displayName:"styles__AnimationMinus",componentId:"sc-8tvqhb-16"})(["",";"],G),ce=n("3zPy"),re=n.n(ce),le=v.a.createElement;function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var s=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Object(r.a)(this,n)}}var ue=function(e){Object(c.a)(n,e);var t=de(n);function n(e,a){var r;Object(s.a)(this,n),r=t.call(this,e,a),Object(d.a)(Object(o.a)(r),"keydownHandler",(function(e){e.keyCode===re.a.codes.right&&r.moveRight(e),e.keyCode===re.a.codes.left&&r.moveLeft(e)})),Object(d.a)(Object(o.a)(r),"moveLeft",(function(e){if(e&&e.stopPropagation(),r.stop(),r.state.selectedCanvas>0){var t=r.state.selectedCanvas-1;r.setState({selectedCanvas:t})}})),Object(d.a)(Object(o.a)(r),"moveRight",(function(e){if(e&&e.stopPropagation(),r.stop(),r.state.selectedCanvas<r.props.content.canvasObjects.length-1){var t=r.state.selectedCanvas+1;r.setState({selectedCanvas:t})}})),Object(d.a)(Object(o.a)(r),"reset",(function(e){e&&e.stopPropagation(),r.stop(),r.props.content.canvasObjects.length>0&&r.setState({selectedCanvas:0})})),Object(d.a)(Object(o.a)(r),"play",(function(e){e.stopPropagation(),r.setState({play:!0,timer:setInterval(r.moveRightTimed,1e3)})})),Object(d.a)(Object(o.a)(r),"moveRightTimed",(function(e){if(e&&e.stopPropagation(),clearInterval(r.state.timer),r.state.selectedCanvas<r.props.content.canvasObjects.length-1){var t=r.state.selectedCanvas+1;r.setState({selectedCanvas:t})}r.state.selectedCanvas<r.props.content.canvasObjects.length-1?r.setState({timer:setInterval(r.moveRightTimed,1e3)}):r.setState({play:!1})})),Object(d.a)(Object(o.a)(r),"stop",(function(e){e&&e.stopPropagation(),clearInterval(r.state.timer),!0===r.state.play&&r.setState({play:!1})})),Object(d.a)(Object(o.a)(r),"switchExpandedView",(function(e){e&&e.stopPropagation(),clearInterval(r.state.timer),!1===r.state.play?r.setState({expandedView:!r.state.expandedView}):r.setState({expandedView:!r.state.expandedView,play:!1})})),Object(d.a)(Object(o.a)(r),"closeModal",(function(){r.stop(),w.a.remove()})),Object(d.a)(Object(o.a)(r),"showCanvasAnimationInModal",(function(e){e&&e.stopPropagation(),r.stop();var t=le(n,{content:r.props.content,config:{displayFullScreen:!0}}),a=function(e){Object(c.a)(a,e);var n=de(a);function a(){var e;Object(s.a)(this,a);for(var t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return e=n.call.apply(n,[this].concat(i)),Object(d.a)(Object(o.a)(e),"modalDgRef",v.a.createRef()),Object(d.a)(Object(o.a)(e),"open",(function(){var t,n,a,s,i,c;null===(t=Object(o.a)(e))||void 0===t||null===(n=t.modalDgRef)||void 0===n||null===(a=n.current)||void 0===a||null===(s=a.modalRef)||void 0===s||null===(i=s.current)||void 0===i||null===(c=i.open)||void 0===c||c.call(i)})),e}return Object(i.a)(a,[{key:"render",value:function(){return le(x.a,{ref:this.modalDgRef},t)}}]),a}(v.a.PureComponent);w.a.create(a,Object(o.a)(r),r.props.theme)})),Object(d.a)(Object(o.a)(r),"renderAnimatedCanvas",(function(e,t,n,a,s){var o=null;if(null!=e&&0!==a){var i="canvasView".concat(t);o=le(K,{key:i},le(y.default,{key:t,mode:"view",content:e,config:n,onWidthChange:r.changeWidth,onHeightChange:r.changeHeight}),a>1&&le(Y,null,le("p",{className:"font-normal"},le("strong",null,s+1)," of ",a)))}else o=le("p",{className:"text-center fg-darkgray50"},le("br",null),le("br",null),"No Canvas Added",le("br",null),le("br",null));return le("div",{style:{textAlign:"center"}},le("div",{style:{display:"block"}},o),a>1?le("div",{style:{textAlign:"center"}},le(Q,null,le(Z,{disabled:0===r.state.selectedCanvas,onClick:r.moveLeft}),le($,{disabled:r.state.selectedCanvas===a-1,onClick:r.moveRight}),r.state.play?le(ee,{onClick:r.stop}):le(te,{disabled:r.state.selectedCanvas===a-1,onClick:r.play}),le(ne,{disabled:0===r.state.selectedCanvas,onClick:r.reset}),le(ae,{onClick:r.switchExpandedView}),r.props.config&&r.props.config.displayFullScreen?le(oe,{onClick:r.closeModal}):le(se,{onClick:r.showCanvasAnimationInModal}))):null)})),Object(d.a)(Object(o.a)(r),"renderExpandedCanvas",(function(e,t){var n=r.props.content.canvasObjects.map((function(t,n){var a=r.state.keys[n];return le(K,{key:a},le(y.default,{key:a,mode:"view",content:t,config:e,onWidthChange:r.changeWidth,onHeightChange:r.changeHeight}),le(Y,null,le("p",{className:"font-normal"},le("strong",null,n+1)," of"," ",r.props.content.canvasObjects.length)))}));return null==n&&(n=le("p",{className:"text-center fg-darkgray50"},le("br",null),le("br",null),"No Canvas Added",le("br",null),le("br",null))),le("div",{style:{textAlign:"center"}},le("div",{style:{display:"block"}},n),le("div",{style:{textAlign:"center"}},le(Q,null,le(ie,{onClick:r.switchExpandedView}),r.props.config&&r.props.config.displayFullScreen?le(oe,{onClick:r.closeModal}):le(se,{onClick:r.showCanvasAnimationInModal}))))}));var l=0,u=[];return r.props.content.canvasObjects.map((function(e,t){return u[t]=l++})),r.state={keys:u,selectedCanvas:0,width:r.props.content.width,height:r.props.content.height,timer:null,expandedView:!1,play:!1},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.content.canvasObjects[this.state.selectedCanvas],n=this.state.keys[this.state.selectedCanvas],a={canvasInAnimation:!0},s=null!=this.props.content.canvasObjects?this.props.content.canvasObjects.length:0,o=null;return o=this.state.expandedView?this.renderExpandedCanvas(a,s):this.renderAnimatedCanvas(t,n,a,s,this.state.selectedCanvas),le("div",{style:{marginTop:30,marginBottom:25,outline:"none"},onFocus:function(){var t;return null===(t=document)||void 0===t?void 0:t.addEventListener("keydown",e.keydownHandler)},onBlur:function(){var t;return null===(t=document)||void 0===t?void 0:t.removeEventListener("keydown",e.keydownHandler)},tabIndex:0},o)}}]),n}(v.a.Component),pe=Object(k.a)(ue),ve=n("rfrl"),he=v.a.createElement;function fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var s=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Object(r.a)(this,n)}}var be=function(e){Object(c.a)(n,e);var t=fe(n);function n(e,a){var i;return Object(s.a)(this,n),i=t.call(this,e,a),Object(d.a)(Object(o.a)(i),"canvasAnimationSvgPreviewRef",v.a.createRef()),Object(d.a)(Object(o.a)(i),"tabsContainerRef",v.a.createRef()),Object(d.a)(Object(o.a)(i),"onDuplicateClickHandler",(function(e){var t,n;e.stopPropagation(),e.preventDefault(),null===(t=(n=i.props).onDuplicate)||void 0===t||t.call(n,i.state.index)})),Object(d.a)(Object(o.a)(i),"onRemoveClickHandler",(function(e){var t,n;e.stopPropagation(),e.preventDefault(),null===(t=(n=i.props).onRemove)||void 0===t||t.call(n,i.state.index)})),Object(d.a)(Object(o.a)(i),"onSelectClickHandler",(function(e){var t,n;e.stopPropagation(),e.preventDefault(),null===(t=(n=i.props).onSelect)||void 0===t||t.call(n,i.state.index)})),i.state={index:e.index,svg:e.svg},i}return Object(i.a)(n,null,[{key:"getComponentDefault",value:function(){return{}}}]),Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setSvgCSS()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.svg!==e.svg||this.props.selected!==e.selected}},{key:"componentDidUpdate",value:function(){this.setSvgCSS()}},{key:"setSvgCSS",value:function(){var e,t;""!==this.props.svg&&(null===(e=this.canvasAnimationSvgPreviewRef.current)||void 0===e||null===(t=e.lastChild)||void 0===t||t.setAttribute("style","width: 100%; height: 100%"))}},{key:"render",value:function(){var e={__html:this.props.svg},t=he("div",{ref:this.canvasAnimationSvgPreviewRef,style:{width:"100px",height:"80px",position:"relative"},dangerouslySetInnerHTML:e}),n=!0===this.props.selected?{border:"1px solid ".concat("#5553FF"),marginLeft:"5px",borderRadius:h.e}:{borderRadius:h.e,marginLeft:"5px"};return he("span",{className:"canvas-animation-thumbnail","data-thumb-index":this.state.index,style:n,onClick:this.onSelectClickHandler},t,he("div",{className:"text-center",style:{display:"block"}},he("h5",{className:"canvas-animation-thumbnail-text"},he("span",null,this.state.index+1)),he(W,{className:"canvas-animation-action-button",onClick:this.onDuplicateClickHandler},he(j.a,null)),!this.props.isOneCanvas&&he(W,{className:"canvas-animation-action-button",onClick:this.onRemoveClickHandler},he(O.a,null))))}}]),n}(v.a.Component),me=function(e){Object(c.a)(n,e);var t=fe(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(d.a)(Object(o.a)(e),"tabsContainerRef",v.a.createRef()),Object(d.a)(Object(o.a)(e),"moveThumbnails",(function(t,n){var a=e.tabsContainerRef.current.querySelectorAll(".canvas-animation-thumbnail"),s=Array.from(a).map((function(e){return parseInt(e.getAttribute("data-thumb-index"),10)})),o=[s[n.itemIndex],s[t.itemIndex]];s[t.itemIndex]=o[0],s[n.itemIndex]=o[1],e.props.reorderCanvas(s)})),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.canvasObjects.map((function(t,n){if(!t)return null;var a=he(be,{key:"th".concat(n),index:n,svg:t.svg_string,selected:n===e.props.selectedCanvas,onSelect:e.props.selectCanvas,onRemove:e.props.removeCanvas,onDuplicate:e.props.duplicateCanvas,isOneCanvas:e.props.isOneCanvas});return he(b.a,{index:n,moveItem:e.moveThumbnails,ListItemJSX:a,key:"item_".concat(n)})}));return he(U,{ref:this.tabsContainerRef},t,he(J,{onClick:this.props.addCanvas},he(g,null)))}}]),n}(v.a.Component),Ce=function(e){Object(c.a)(n,e);var t=fe(n);function n(e,a){var i,c,r;Object(s.a)(this,n),r=t.call(this,e,a),Object(d.a)(Object(o.a)(r),"canvasRef",v.a.createRef()),Object(d.a)(Object(o.a)(r),"bufferedCanvasContent",null),Object(d.a)(Object(o.a)(r),"addCanvas",(function(){var e=y.default.getComponentDefault();r.addCanvasObject(e)})),Object(d.a)(Object(o.a)(r),"changeHeight",(function(e){r.props.updateContentState((function(t){t.canvasObjects=r.cleanCanvasObjects(t),t.canvasObjects.forEach((function(t){return t.height=e})),t.height=e}))})),Object(d.a)(Object(o.a)(r),"changeWidth",(function(e){r.props.updateContentState((function(t){t.canvasObjects=r.cleanCanvasObjects(t),t.canvasObjects.forEach((function(t){return t.width=e})),t.width=e}))})),Object(d.a)(Object(o.a)(r),"duplicateCanvas",(function(e){r.saveCurrentCanvas();var t=r.props.content.canvasObjects[e];e===r.getSelectedCanvasIndex()&&null!=r.bufferedCanvasContent&&(t=r.bufferedCanvasContent),t=f.a(t),r.addCanvasBase(t,!0,e)})),Object(d.a)(Object(o.a)(r),"removeCanvas",(function(e){var t=r.getSelectedCanvasIndex(),n=t;(e<t||e===t&&r.props.content.canvasObjects.length-1===t)&&(n=t-1),r.props.updateContentState((function(t){t.canvasObjects=[].concat(Object(u.a)(t.canvasObjects.slice(0,e)),Object(u.a)(t.canvasObjects.slice(e+1))),t.canvasObjects=r.cleanCanvasObjects(t),t.keys.splice(e,1),t.selectedCanvas=n})),r.setState(Object(ve.a)((function(t){t.keys.splice(e,1)})))})),Object(d.a)(Object(o.a)(r),"reorderCanvas",(function(e){if(!(e.length<=1)){var t=e.findIndex((function(e){return r.getSelectedCanvasIndex()===e})),n=e.map((function(e){return r.props.content.canvasObjects[e]})),a=e.map((function(e){return r.state.keys[e]}));r.props.updateContentState({canvasObjects:n,keys:a,selectedCanvas:t}),r.setState({keys:a})}})),Object(d.a)(Object(o.a)(r),"selectCanvas",(function(e){r.saveCurrentCanvas(),r.props.updateContentState((function(t){t.canvasObjects[r.getSelectedCanvasIndex()]=r.bufferedCanvasContent,t.canvasObjects=r.cleanCanvasObjects(t),t.selectedCanvas=e})),r.bufferedCanvasContent=null})),Object(d.a)(Object(o.a)(r),"updateCanvasState",(function(e){r.bufferedCanvasContent=e})),Object(d.a)(Object(o.a)(r),"updateCanvasObjectCallback",(function(e){r.props.updateContentState((function(t){t.canvasObjects[r.getSelectedCanvasIndex()]=e,t.canvasObjects=r.cleanCanvasObjects(t)}))}));var l=0,p=[];return null===(i=(c=r.props).updateContentState)||void 0===i||i.call(c,(function(e){e.canvasObjects=r.cleanCanvasObjects(e)})),e.content.canvasObjects.map((function(e,t){return p[t]=l++})),r.state={keys:p},r}return Object(i.a)(n,null,[{key:"getComponentDefault",value:function(){return{version:"1.0",width:600,height:400,canvasObjects:[y.default.getComponentDefault()]}}},{key:"getNewComponentDefault",value:function(){return{version:"2.0",width:600,height:400,canvasObjects:[y.default.getComponentDefault()],keys:[0],selectedCanvas:0}}}]),Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return"edit"===this.props.mode&&"view"===e.mode&&this.saveComponent(),!0}},{key:"componentWillUnmount",value:function(){this.saveComponent()}},{key:"addCanvasBase",value:function(e,t,n){var a,s=this,o=(a=this.state.keys)&&0!==a.length?Math.max.apply(Math,Object(u.a)(a))+1:0,i=this.getSelectedCanvasIndex();this.props.updateContentState((function(a){var c;s.bufferedCanvasContent&&(a.canvasObjects[i]=s.bufferedCanvasContent,a.canvasObjects=s.cleanCanvasObjects(a)),a.keys=null!==(c=a.keys)&&void 0!==c?c:[0],a.selectedCanvas=t?n+1:a.canvasObjects.length,a.keys.splice(a.selectedCanvas,0,o),a.canvasObjects.splice(a.selectedCanvas,0,e)})),this.bufferedCanvasContent=null,this.setState(Object(ve.a)((function(e){e.keys.splice(t?n:e.keys.length,0,o)})))}},{key:"addCanvasObject",value:function(e){this.saveCurrentCanvas(),this.addCanvasBase(e)}},{key:"getSelectedCanvasIndex",value:function(){return this.props.content.selectedCanvas?this.props.content.selectedCanvas:0}},{key:"cleanCanvasObjects",value:function(e){return e.canvasObjects.map((function(e){return null!==e&&void 0!==e?e:y.default.getComponentDefault()}))}},{key:"saveComponent",value:function(){var e=this;"edit"===this.props.mode&&(this.saveCurrentCanvas(),this.props.updateContentState((function(t){t.canvasObjects[e.getSelectedCanvasIndex()]=e.bufferedCanvasContent,t.canvasObjects=e.cleanCanvasObjects(t)})),this.bufferedCanvasContent=null)}},{key:"saveCurrentCanvas",value:function(){var e,t;null===(e=this.canvasRef.current)||void 0===e||null===(t=e.saveComponent)||void 0===t||t.call(e)}},{key:"render",value:function(){var e="edit"!==this.props.mode,t=this.props,n=t.pageId,s=t.authorId,o=t.collectionId,i=t.isDraft,c=t.userId,r=t.shotId,l=t.editorPageId,d={pageId:n,authorId:s,collectionId:o,userId:c,shotId:r,editorPageId:l};if(e)return he(pe,{content:this.props.content,key:"canvasViewer"});var u,p=this.getSelectedCanvasIndex(),v=this.props.content.canvasObjects?this.props.content.canvasObjects[p]:null,h={pageId:n,authorId:s,collectionId:o,isDraft:i,userId:c,shotId:r,editorPageId:l},f=this.state.keys[p];return u=he(y.default,Object(a.a)({ref:this.canvasRef,key:f,mode:"edit",content:v,config:{canvasInAnimation:!0},locationProps:h,onWidthChange:this.changeWidth,dispatch:this.props.dispatch,onHeightChange:this.changeHeight,updateContentState:this.updateCanvasState,updateCanvasObjectCallback:this.updateCanvasObjectCallback,isFullscreen:this.props.isFullscreen},d)),he(X,null,he(me,{canvasObjects:this.props.content.canvasObjects,keys:this.state.keys,selectedCanvas:p,reorderCanvas:this.reorderCanvas,selectCanvas:this.selectCanvas,removeCanvas:this.removeCanvas,duplicateCanvas:this.duplicateCanvas,addCanvas:this.addCanvas,isOneCanvas:1===this.props.content.canvasObjects.length}),he("div",null,u),!this.props.isFullscreen&&this.props.fullscreenIconToggle({onClick:this.props.toggleFullScreen,style:{position:"absolute",right:"25px",top:"20px"}}))}}]),n}(v.a.Component);t.default=Ce}}]);
//# sourceMappingURL=318.8a333bcdd6f8466852f5.js.map